---
- name: Ensure global npm packages are present
  npm:
    name: "{{ item }}"
    global: true
    state: present
    production: true
  loop: "{{ npm.packages }}"
- name: Ensure python global packages are present
  pip:
    requirements: "{{ lookup('fileglob','requirements.txt') }}'"
    state: present
- name: bundle the gems
  become: false
  bundler:
    gemfile: "{{ role_path }}/files/Gemfile"
    clean: no
    user_install: yes
    state: present
  tags:
    - gems
